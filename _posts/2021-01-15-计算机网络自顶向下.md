---
layout: post
title: "计算机网络自顶向下"
---

# 计算机网络自顶向下

## 1 计算机网络和因特网

端系统通过**通信链路**和**分组交换机**连接在一起。

分组交换机将从链路收到的分组（将信息分段并加上首字母的信息包）再通过链路进行转发。常见的分组交换机有：*路由器，链路层交换机*-接入网络。

一个分组经历的链路和分组交换机称为路径。

TCP (transmission control protocol 传输控制协议)。

IP(internet protocol 网际协议)：定义了在路由器和端系统之间发送和接收的分组格式。

### 1.3 网络核心

#### 1.3.1 分组交换

一份信息会被划分成几个小块，称为分组。分组通过链路和分组交换机传送，传送的速度是链路的最大传送速率。所以，若一个分组大小是L比特，链路的传输速率是R比特/秒，则传输的时间是L/R秒。

- **存储转发传输**

  交换机输出分组之前必须先接收到所有分组。因此会有一个储存的过程。所以一个分组只经过一个交换机，两条链路，全部传输的时间是2*L/R秒。

- **排队时延和分组丢失**

  对于每一条链路，分组交换机都对它有一个输出缓存（输出队列）。如果这一块缓存被填满了，但是还有包在进入，那么会丢包。

- **转发表和路由选择协议**

  通过IP选择向哪个端系统转发，转发表可以自动分配。

#### 1.3.2 电路交换

移动数据有两种方法：分组交换、电路交换。电路交换会预约链路的一部分作为其专属，若一条链路有4条**电路**，则申请其1/4，分组在电路上的传输速率是R/4。

- **电路交换网络中的复用**

  上一段中电路的实现有两种方式：***频分复用-FDM***，***时分复用-TDM***。

  FDM：链路上划分频率，每条电路占一个频段。宽度通常为4kHz。

  TDM：时间上划分固定时长为帧。，每个帧被划分为固定数量的时隙，每个时隙就是一条电路。因为是在时间上划分帧，所以时间维度上的每一帧都是同一个帧的不同时间，所以所有帧划分的时隙数量一样，且帧A的时隙C=帧B的时隙C。

- **分组交换与电路交换的对比**

#### 1.3.3 网络的网络

PoP：提供商网络中的一台或多台路由器群组。

多宿：一个客户连接多个提供商。

对等：同一级别，信息传输不交费。

因特网交换点IXP：多个ISP可在这里对等。用于ISP们直接交换数据，避免向更高层的ISP交费，IXP计算流量赚钱。

### 1.4 分组交换网中的时延、丢包和吞吐量

#### 1.4.1 分组交换网中的时延概述

- **时延的类型**

  - 处理时延
- 排队时延
  - 传输时延
- 传播时延
  
> 传输时延指路由器推出分组需要的时间，传播时延指走实际链路长度需要的时间。

#### 1.4.2 排队时延和丢包

排队时延与传输速率有关。排队时延与**流量强度**（L*a/R）正相关。a是分组到达队列的平均速度。

#### 1.4.3 端到端时延

- **traceroute**

  会返回n值----第n台路由，路由器名字，路由器地址，3列往返时延。

- **端系统，应用程序和其他时延**

#### 1.4.4 计算机网络中的吞吐量

吞吐量是链路中最小的吞吐量。

### 1.5 协议层次及其服务模型

#### 1.5.1 分层的体系结构

- **协议分层**

  有协议栈。

  5层：自顶向下：应用层，运输层，网络层，链路层，物理层。

  7层：应用层，表示层，会话层，运输层，网络层，数据链路层，物理层。

#### 1.5.2 封装

封装指，将来自上一层的信息进行封装，并附上自己这一层的开头，就像是包装东西一样。